<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="mobile-web-app-capable" content="yes">

	<title>test</title>

	<style>
		* {padding:0; margin:0; box-sizing: border-box;}
        .wrap{float:left; margin:1300px 0 1300px;}
        .wrap button{float:left; margin:5px 30px;}

        .info-detail-pnl{position: absolute; top:0; left:0; display: none;}
        .info-detail-pnl.on{display: block;}
	</style>
</head>

<body>
    <div class="wrap">
        <button type="button">aaaaaa</button>
        <button type="button">aaaaaa</button>
        <button type="button">aaaaaa</button>
        <button type="button">aaaaaa</button>
        <button type="button">aaaaaa</button>
        <button type="button" class="info-detail-btn" data-drop="info">bbbbbb</button>
        
        <section class="info-detail-pnl" data-drop="info">
            <div style="border:1px solid #ccc; background:#fff; width:200px; height:300px;">
                <h2>bbbbbb</h2>
                <a href="#">aaaa</a><br>
                <a href="#">bbb</a><br> 
                <a href="#">ccc</a>
            </div>
        </section>
    </div>
        	

	<!-- script -->
	<script>
        function infoDrop() {
            const el_info_btn = document.querySelector('.info-detail-btn');
            let timer;

            el_info_btn.addEventListener('mouseover', dropShow);
            el_info_btn.addEventListener('focus', dropShow);

            function dropShow() {
                const dropname = this.dataset.drop;
                const el_info_pnl = document.querySelector('.info-detail-pnl[data-drop="'+ dropname +'"]');

                el_info_btn.addEventListener('mouseleave', dropHideDelay);
                el_info_pnl.addEventListener('mouseover', function() {
                    clearTimeout(timer);
                });
                el_info_pnl.addEventListener('mouseleave', dropHideDelay);
                clearTimeout(timer);
                
                el_info_pnl.classList.toggle('on');
                
                const elT = this.getBoundingClientRect().top;
                const elL = this.getBoundingClientRect().left;
                const elW = this.offsetWidth;
                const elH = this.offsetHeight;
                const wW = window.innerWidth;
                const wH = window.innerHeight;
                const dT = document.documentElement.scrollTop;
                const dL = document.documentElement.scrollLeft;
                const pnlw = el_info_pnl.offsetWidth;
                const pnlh = el_info_pnl.offsetHeight;
                
                act();
                function act(){
                    if (elL < pnlw/2 + elW/2) {
                        el_info_pnl.style.left = elL + 'px';
                    
                    } else if (wW - (elL + (elW/2)) < pnlw/2 + elW/2) {
                        el_info_pnl.style.left = (elL - pnlw + elW) + 'px';
                    } else {
                        el_info_pnl.style.left = elL - (pnlw/2) + (elW/2) + 'px';
                    }

                    el_info_pnl.style.top = (elT - pnlh + dT - 12) + 'px';
                }
            }

            function dropHideDelay(){ 
                const t = this;

                timer = setTimeout(function(){
                    dropHide(t);
                }, 500);
            }

            function dropHide(v){
                const dropname = v.dataset.drop;
                const el_info_pnl = document.querySelector('.info-detail-pnl[data-drop="'+ dropname +'"]');

                el_info_pnl.classList.remove('on');
            }
        }
        infoDrop();
		
	</script>
</body>
</html>
