<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0 user-scalable=0">
<link rel="stylesheet" type="text/css" href="./css/include.css" >
<link rel="stylesheet" type="text/css" href="./css/data.css" >
<title></title>
<script src="./js/base.js"></script>
<script src="./js/view.js"></script>
<script src="./js/jquery-3.3.1.min.js"></script>
<script src="./js/jquery-ui.min.js"></script>
<script src="./js/common.js"></script>

</head>

<body>
	<!-- Content -->
	<div id="wrap" class="type-data">
		<header class="header">
			<h1 class="title">
				<span>초등학교</span>
				<strong>과학 4-1</strong>
			</h1>

			<div class="header-group">
				<div class="inp-round">
					<input type="text" placeholder="자료 검색">
					<button type="button" ><img src="./img/data/btn-search.png" alt="자료 출처"></button>
				</div>
				<a href="#">
					<img src="./img/data/btn-dataorigin.png" alt="자료 출처">
				</a>
				<a href="#">
					<img src="./img/data/btn-comdata.png" alt="공통 출처">
				</a>
			</div>
		</header>
		
		<div class="container">
			<div class="cont-head">
				<div id="chapterSelect" class="custom-select">
					<select>
						<option value="" selected>단원</option>
						<option value="">1. 물질의 성질</option>
						<option value="">2. 동물의 한살이</option>
						<option value="">3. 자석의 이용</option>
						<option value="">4. 지구의 모습</option>
					</select>
				</div>
			</div>

			<div class="tab-wrap">
				<div class="tab-head">
					<div class="group">
						<button type="button">
							<img src="./img/data/btn-allget.png" alt="단원 자료 전체 받기">
						</button>
						<button type="button">
							<img src="./img/data/btn-get.png" alt="선택 자료 받기">
						</button>

					</div>
					<div class="tab-btn-wrap">
						<button type="button" class="tab-btn selected" tabname="tab1" idx="1">
							<span>차시별 자료</span>
						</button>
						<button type="button" class="tab-btn" tabname="tab1" idx="2">
							<span>단원별 자료</span>
						</button>
					</div>
				</div>
				<div class="box-bg">
					<div class="tab-body scrollStyle v2">
						<div class="tab-pnl" tabname="tab1" idx="1">
							<div class="tbl-data">
								<table>
									<caption>단원구성, 수업ppt, 활동지, 차시별형성평가, 탐구영상, 수업도움영상 정보입니다. </caption>
									<colgroup>
										<col style="width:auto">
										<col style="width:220px">
										<col style="width:210px">
										<col style="width:210px">
										<col style="width:210px">
										<col style="width:240px">
									</colgroup>
									<thead>
									<tr>
										<th scope="col" rowspan="2">단원 구성</th>
										<th scope="col" rowspan="2">
											<input type="checkbox" id="ck1">
											<label for="ck1">수업 PPT</label>
										</th>
										<th scope="col" colspan="3" class="no-line">
											활동지
										</th>
										<th scope="col" rowspan="2">
											<input type="checkbox" id="ck5">
											<label for="ck5">탐구/ <br>해 보기 영상</label>
										</th>
									</tr>
									<tr class="row-group">
										<th scope="col">
											<input type="checkbox" id="ck2-1">
											<label for="ck2-1">해 보기</label>
										</th>
										<th scope="col">
											<input type="checkbox" id="ck2-2">
											<label for="ck2-2">대체 탐구</label>
										</th>
										<th scope="col">
											<input type="checkbox" id="ck2-3">
											<label for="ck2-3">알짜 정리</label>
										</th>
									</tr>
									</thead>
									<tbody>
										<tr>
											<th scope="row">
												<input type="checkbox" id="class_c1">
												<label for="class_c1">[1 차시] 물질의 성질</label>
											</th>
											<td>
												<button type="button" class="ico-ppt" aria-label="ppt"></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp"></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp"></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp"></button>
											</td>
											<td>
												<button type="button" class="ico-mp4" aria-label="mp4"></button>
											</td>
										</tr>
										<tr>
											<th scope="row">
												<input type="checkbox" id="class_c2">
												<label for="class_c2">[2 차시] 물질의 성질</label>
											</th>
											<td>
												<button type="button" class="ico-ppt" aria-label="ppt" disabled></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp" disabled></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp" ></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp" ></button>
											</td>
											<td>
												<button type="button" class="ico-mp4" aria-label="mp4" disabled></button>
											</td>
										</tr>
										<tr>
											<th scope="row">
												<input type="checkbox" id="class_c3">
												<label for="class_c3">[2 차시] 물질의 성질</label>
											</th>
											<td>
												<button type="button" class="ico-ppt" aria-label="ppt" ></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp" ></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp" ></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp" ></button>
											</td>
											<td>
												<button type="button" class="ico-mp4" aria-label="mp4" ></button>
											</td>
										</tr>
										<tr>
											<td>
												<input type="checkbox" id="class_c4">
												<label for="class_c4">[2 차시] 물질의 성질</label>
											</td>
											<td>
												<button type="button" class="ico-ppt" aria-label="ppt" ></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp" ></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp" ></button>
											</td>
											<td>
												<button type="button" class="ico-hwp" aria-label="hwp" ></button>
											</td>
											<td>
												<button type="button" class="ico-mp4" aria-label="mp4" ></button>
												<button type="button" class="ico-mp4" aria-label="mp4" ></button>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="tab-pnl" tabname="tab1" idx="2">
							<div class="tbl-data type-2">
								<table>
									<caption>단원구성, 수업ppt, 활동지, 차시별형성평가, 탐구영상, 수업도움영상 정보입니다. </caption>
									<colgroup>
										<col style="width:auto">
										<col style="width:auto">
										<col style="width:auto">
										<col style="width:auto">
									</colgroup>
									<thead>
										<tr>
											<th scope="col">
												<input type="checkbox" id="ck1-b">
												<label for="ck1-b">수업 자료</label>
											</th>
											<th scope="col">
												<input type="checkbox" id="ck2-b">
												<label for="ck2-b">평가 자료</label>
											</th>
											<th scope="col">
												<input type="checkbox" id="ck3-b">
												<label for="ck3-b">멀티미디어 자료</label>
											</th>
											<th scope="col">
												<input type="checkbox" id="ck4-b">
												<label for="ck4-b">이미지 자료</label>
											</th>
										</tr>
									</thead>
									<tbody>
										<tr>
											<td>
												<input type="checkbox" id="list-a001">
												<label for="list-a001">
													<span class="ico-pdf"></span>교과서
												</label>
											</td>
											<td>
												<input type="checkbox" id="list-b001">
												<label for="list-b001">
													<span class="ico-hwp"></span>수행 평가
												</label>
											</td>
											<td>
												<input type="checkbox" id="list-c001">
												<label for="list-c001">
													<span class="ico-mp4"></span>단원 도입 영상
												</label>
											</td>
											<td>
												<input type="checkbox" id="list-d001">
												<label for="list-d001">
													<span class="ico-zip"></span>교과서 이미지
												</label>
											</td>
										</tr>
										<tr>
											<td>
												<input type="checkbox" id="list-a002">
												<label for="list-a002">
													<span class="ico-ppt"></span>실험관찰
												</label>
											</td>
											<td>
												<input type="checkbox" id="list-b002">
												<label for="list-b002">
													<span class="ico-hwp"></span>서술형 평가
												</label>
											</td>
											<td>
												<input type="checkbox" id="list-c002">
												<label for="list-c002">
													<span class="ico-zip"></span>창의 융합 영상
												</label>
											</td>
											<td>
												<input type="checkbox" id="list-d002">
												<label for="list-d002">
													<span class="ico-zip"></span>교과서 이미지
												</label>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
			

		</div>
	
	</div>


	<script>
	var x, i, j, l, ll, selElmnt, a, b, c;
	/*look for any elements with the class "custom-select":*/
	x = document.getElementsByClassName("custom-select");
	l = x.length;
	for (i = 0; i < l; i++) {
		selElmnt = x[i].getElementsByTagName("select")[0];
		ll = selElmnt.length;
		/*for each element, create a new DIV that will act as the selected item:*/
		a = document.createElement("DIV");
		a.setAttribute("class", "select-selected");
		a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
		x[i].appendChild(a);
		/*for each element, create a new DIV that will contain the option list:*/
		b = document.createElement("DIV");
		b.setAttribute("class", "select-items select-hide");
		for (j = 1; j < ll; j++) {
		/*for each option in the original select element,
		create a new DIV that will act as an option item:*/
		c = document.createElement("DIV");
		c.setAttribute("class", "viewTooltip2");
		c.setAttribute("title", selElmnt.options[j].innerHTML);
		c.innerHTML = selElmnt.options[j].innerHTML;
		c.addEventListener("click", function(e) {
			/*when an item is clicked, update the original select box,
			and the selected item:*/
			var y, i, k, s, h, sl, yl;
			s = this.parentNode.parentNode.getElementsByTagName("select")[0];
			sl = s.length;
			h = this.parentNode.previousSibling;
			for (i = 0; i < sl; i++) {
				if (s.options[i].innerHTML == this.innerHTML) {
				s.selectedIndex = i;
				h.innerHTML = this.innerHTML;
				y = this.parentNode.getElementsByClassName("same-as-selected");
				yl = y.length;
				for (k = 0; k < yl; k++) {
					y[k].removeAttribute("class");
				}
				this.setAttribute("class", "same-as-selected");
				break;
				}
			}
			h.click();
		});
		b.appendChild(c);
		}
		x[i].appendChild(b);
		a.addEventListener("click", function(e) {
			/*when the select box is clicked, close any other select boxes,
			and open/close the current select box:*/
			e.stopPropagation();
			closeAllSelect(this);
			this.nextSibling.classList.toggle("select-hide");
			this.classList.toggle("select-arrow-active");
		});
	}
	function closeAllSelect(elmnt) {
		/*a function that will close all select boxes in the document,
		except the current select box:*/
		var x, y, i, xl, yl, arrNo = [];
		x = document.getElementsByClassName("select-items");
		y = document.getElementsByClassName("select-selected");
		xl = x.length;
		yl = y.length;
		for (i = 0; i < yl; i++) {
		if (elmnt == y[i]) {
			arrNo.push(i)
		} else {
			y[i].classList.remove("select-arrow-active");
		}
		}
		for (i = 0; i < xl; i++) {
		if (arrNo.indexOf(i)) {
			x[i].classList.add("select-hide");
		}
		}
	}
	/*if the user clicks anywhere outside the select box,
	then close all select boxes:*/
	document.addEventListener("click", closeAllSelect);
	</script>
	<script>
		;(function($, win, doc, undefined) {
			$(doc).ready(function(){
				tabToggle(null, 'tab1', 1);
				$('.tab-btn').on('click', tabToggle);

				function tabToggle(e, n, i) {
					var tname = !!n ? n : $(this).attr('tabname');
					var idx = !!i ? i : $(this).attr('idx');
					var $btn = $('.tab-btn[tabname="'+ tname +'"]');
					var $pnl = $('.tab-pnl[tabname="'+ tname +'"]');
					var $btnCurrent = $('.tab-btn[tabname="'+ tname +'"][idx="'+ idx +'"]');
					var $pnlCurrent = $('.tab-pnl[tabname="'+ tname +'"][idx="'+ idx +'"]');

					$btn.removeClass('selected');
					$btnCurrent.addClass('selected');
					$pnl.removeClass('selected');
					$pnlCurrent.addClass('selected');

				}

				$('.tbl-data th input').on('change', changeBg);
				$('.tbl-data td input').on('change', changeBg);
				function changeBg(e) {
					var $this = $(this);
					var checked = $this.prop('checked');
					var $tbl = $(this).closest('table');
					var isTd = !!$this.closest('td').length;
					var isCol = !!$this.closest('thead').length;
					var idx = null;

					if (isTd) {
						var $td = $this.closest('td');

						if (checked) {
							$td.addClass('on');
						} else {
							$td.removeClass('on');
						}
					} else {
						if (isCol) {
							idx = $this.closest('th').index();
							$tbl.find('tr').each(function(){
								if (checked) {
									$(this).find('> *:eq('+ idx +')').addClass('on').find('input').prop('checked', true);
								} else {
									$(this).find('> *:eq('+ idx +')').removeClass('on').find('input').prop('checked', false);
								}
								


							});
							
						} else {
							var $tr = $this.closest('tr');
							(checked) ?
							$tr.addClass('on'):
							$tr.removeClass('on');
						}
					}
					


					console.log(idx)
				}

			});
		})(jQuery, window, document);
	</script>
</body>
</html>